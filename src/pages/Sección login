const submit = async (e: React.FormEvent) => {
    e.preventDefault();
    setBusy(true);
    setError(null);
    try {
      // ğŸ”¹ AutenticaciÃ³n normal contra el backend
      const data = await postJson<{ token: string; user?: any }>("/api/auth/login", {
        email,
        password,
      });

      // ğŸ”¹ Guarda el token y datos del usuario
      login(data.token, data.user || null);

      // ğŸ”’ RedirecciÃ³n segura a WAPP (multidominio)
      // 1ï¸âƒ£ OpciÃ³n recomendada: ir directamente a wapp.udochain.com con el token en la URL
      window.location.href = `https://wapp.udochain.com?token=${encodeURIComponent(data.token)}`;

      // 2ï¸âƒ£ Alternativa si querÃ©s seguir mostrando el dashboard interno antes:
      // navigate(`/dashboard?token=${data.token}`);
    } catch (err: any) {
      setError(err?.message || "Login failed");
    } finally {
      setBusy(false);
    }
  };
